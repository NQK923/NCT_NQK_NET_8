<div class="bg-gray-500 h-auto">
  <div>
    <div class="row pt-2">
      <div class="col-2 bg-gray-500">
        <div class="px-2">
          <img [src]="mangaDetails.cover_img" alt="Cover Image">

          <div (click)="toggleFavorite()" *ngIf="!isFavorite"
               class="text-yellow-500 text-sm border-2 mt-2 flex border-yellow-500 rounded-sm p-2 justify-between hover:bg-yellow-500 hover:text-gray-500 cursor-pointer">
            <div>Yêu thích</div>
            <img alt="" class="h-5 px-1 ml-4" src="https://mangaimg.blob.core.windows.net/assets/icon_heart.png">
          </div>

          <div (click)="toggleFavorite()" *ngIf="isFavorite"
               class="text-yellow-500 text-sm border-2 mt-2 border-yellow-500 flex rounded-sm p-2 justify-between hover:bg-yellow-500 hover:text-gray-500 cursor-pointer">
            <div>Đã yêu thích</div>
            <img alt="" class="h-5 px-1 ml-4" src="https://mangaimg.blob.core.windows.net/assets/icon_heart.png">
          </div>

          <div (click)="toggleRatingSection()"
               class="text-yellow-500 text-sm border-2 mt-2 border-yellow-500 rounded-sm p-2 flex justify-between hover:bg-yellow-100 cursor-pointer"
               id="Evaluate">
            <div class="text-yellow-500 text-sm hover:text-gray-500">Đánh
              giá: {{ mangaDetails.rating | number:'1.1-1' }}
              /5
            </div>
            <img alt="Star Icon" class="h-5 mx-1"
                 src="https://mangaimg.blob.core.windows.net/assets/icons8-star-30.png">
          </div>

          <div *ngIf="showRatingSection">
            <div class="text-sm text-yellow-500 items-center border-2 border-yellow-500 rounded-sm my-1 p-1">
              <div class="flex">
                <p>Đánh giá: <span>{{ selectedRatingValue }}</span> sao</p>
                <div class="flex space-x-1 cursor-pointer">
        <span (click)="selectRating(star)"
              *ngFor="let star of [1, 2, 3, 4, 5]"
              [ngClass]="{
                'text-yellow-500': selectedRatingValue >= star,
                'text-gray-400': selectedRatingValue < star
              }">
          &#9733;
        </span>
                </div>
              </div>
              <div class="flex justify-center">
                <button (click)="confirmRating()" class="btn-warning w-full">Xác nhận</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-10">
        <div class="bg-gradient-to-r from-black to-gray-500 p-3">
          <div class="text-3xl font-bold text-white">{{ mangaDetails.name }}</div>
          <div class="text-gray-500">{{ mangaDetails.author }}</div>
        </div>
        <div class="flex flex-wrap p-2">
          <div *ngFor="let category of filteredCategories"
               [attr.title]="category.name + ' \n' + category.description"
               class="bg-yellow-500 text-gray-900 rounded-lg p-2 m-2 text-sm">
            {{ category.name }}
          </div>
        </div>
        <div>
          <p class="font-bold text-white m-2 text-xl">Tóm tắt</p>
        </div>
        <div class="container-fluid border-t border-gray-400 h-1 p-0"></div>
        <div>
          <p class="p-4 text-white">{{ mangaDetails.describe }}</p>
        </div>
      </div>
    </div>
  </div>
  <div>
    <div class="row">
      <div class="col-7 p-4">
        <div class="container-fluid border-t border-gray-400 h-1 p-0"></div>
        <div
          class="flex items-center justify-between text-white font-bold p-2 bg-gradient-to-r from-gray-500 to-black w-full">
          <p class="text-2xl">Danh sách chương</p>
          <img (click)="sortChapter(ascending)" alt=""
               class="h-7 white-icon cursor-pointer"
               src="https://mangaimg.blob.core.windows.net/assets/arrow-sort-icon.png">
        </div>
        <div (click)="goToChapter(chapter.index)" *ngFor="let chapter of chapters"
             [ngClass]="{'bg-gray-600': chapter.isRead}"
             class="hover:bg-black w-full cursor-pointer rounded-xl m-1"
             tabindex="0">
          <div class="flex justify-between items-center py-2 px-2">
            <div>
              <p class="text-white font-bold text-2xl">Chương: {{ chapter.index }}</p>
              <p class="text-white">{{ chapter.title }}</p>
            </div>
            <div class="ml-auto text-right">
              <p class="text-white">Ngày đăng: {{ chapter.created_at | date:'HH:mm dd/MM/yyyy' }}</p>
              <p *ngIf="chapter.isRead" class="text-white text-sm"> Đã đọc</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

